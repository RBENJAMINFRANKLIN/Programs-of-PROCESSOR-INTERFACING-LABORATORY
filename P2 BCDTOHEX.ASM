DISP MACRO VAR
        MOV AH,09H
        LEA DX,VAR
        INT 21H
ENDM
.MODEL SMALL
.STACK 100H
.DATA
        MENU DB 10,13,9, "ENTER THE CHOICE ",10,13,9,"1.BCD TO HEX",10,13,9,"2. HEX TO BCD ",10,13,9, "3. EXIT $"
        MSG1 DB 10,13,9,"ENTER A VALID BCD NUMBER  $"
        MSG2 DB 10,13,9,"THE CONVERTED HEX NUMBER IS $ "
        MSG3 DB 10,13,9, "NO, NOT A VALID BCD NUMBER $" 
        MSG4 DB 10,13,9,"ENTER A VALID HEX NUMBER :- $"
        MSG5 DB 10,13,9,"THE CONVERTED BCD NUMBER IS $"
        MSG6 DB 10,13,9, "THANKS $"
        BCD1 DB 6,?,6 DUP (0)
        HEX1 DB 5,?,5 DUP(0)
        SUM DW 0
        SUM1 DW 0
.CODE
        MOV AX,@DATA
        MOV DS,AX

        MEN: DISP MENU
	
	MOV AH,01H
	INT 21H

	CMP AL,31H
	JE BCD
 
	CMP AL,32H
	JE HEX
	
	JMP EXIT

	BCD:CALL B2H
       JMP MEN
       HEX: CALL H2B
        JMP MEN
	
	PROC B2H NEAR
	S: MOV SUM,0
	   DISP MSG1
	   MOV AH,0AH
	   LEA DX,BCD1
	   INT 21H	
                   
	   XOR CX,CX
           LEA SI,BCD1[1]
	   MOV CL,[SI]
	   ADD SI,CX
	  MOV BX,01H
	  XOR AX,AX
    BACK: MOV AL,[SI]
          CMP AL,39H
	  JA BACK2 
	  SUB AL,30H
	  MUL BX ; AX=AX*BX
	  ADD SUM,AX
          DEC SI
	  MOV AX,10
	  MUL BX
	  MOV BX,AX
	  LOOP BACK
DISP MSG2
MOV CX,04H
MOV BX,SUM
BACK1:  ROL BX,04H
	MOV DL,BL
	AND DL,0FH
	CMP DL,09H
	JBE ADD30
	ADD DL,07H
	ADD30: ADD DL,30H
	MOV AH,02H
	INT 21H      	
	LOOP BACK1
	JMP ENDX
BACK2: DISP MSG3
JMP S
ENDX:
RET
ENDP

PROC H2B NEAR
MOV SUM1,0
DISP MSG4
MOV AH,0AH
LEA DX,HEX1
INT 21H

XOR CX,CX
LEA SI,HEX1[1]
MOV CL,[SI]
ADD SI,CX
MOV BX,1H
XOR AX,AX

BCK1:   MOV AL,[SI]
        SUB AL,30H
	CMP AL,09H
	JBE CON
	SUB AL,07H
CON:    MUL BX
	ADD SUM1,AX
	DEC SI
	MOV AX,10H
	MUL BX
	MOV BX,AX
	LOOP BCK1
	MOV AX,SUM1
BCK2: XOR DX,DX
      MOV BX,0AH ; BX =10H
      DIV BX ; AX = AX/BX  DX = REMAINDER & AX = QUOTIENT
      PUSH DX
      INC CX
      CMP AX,00H
      JNE BCK2
      DISP MSG5
      BACK3:POP DX
      ADD DL,30H

      MOV AH,02H
      INT 21H
      LOOP BACK3
RET
ENDP
EXIT: DISP MSG6
 		
MOV AH,4CH
INT 21H

END                        



